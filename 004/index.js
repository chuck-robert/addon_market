/*QUIK_ADDON 1|屏保|1|1.0.0|在右上角菜单中打开全屏屏保(图标来源：https://www.flaticon.com/free-icons/image-comics)|siquan|https://cdn-icons-png.flaticon.com/128/8820/8820179.png|https://siquan001.github.io/|version.txt|siquan.screenprotect */
var t=quik.storage("q-pinbao-cache");(function(){var e=new quik.dialog({content:'<div class="lic-c"><h1>屏保 插件使用须知</h1><p>1. 屏保中的图片来源于以下API，若出现图片的问题，图片左上角会显示图片API，请联系该API负责人</p><ul><li>loliapi</li><li>https://api.anosu.top/img?sort=pc</li><li>https://t.alcy.cc/pc/</li><li>https://t.alcy.cc/moe/</li><li>https://t.alcy.cc/fj/</li><li>https://img.xjh.me/random_img.php?type=bg&ctype=acg/nature&return=302</li><li>https://tu.ltyuanfang.cn/api/fengjing.php</li><li>https://api.gumengya.com/Api/FjImg?format=image</li></ul><p>2. 屏保左下方的一言由Ten·API提供，如若出现有关一言的“随机一言”的内容相关问题，请联系Ten·API，本产品不负责任</p></div><div class="btns"><div class="btn cancel">不同意</div><div class="btn ok">同意</div></div>'}),i=e.getDialogDom();util.query(i,".btn.cancel").onclick=function(){n(!1),e.close()},util.query(i,".btn.ok").onclick=function(){t.set("lic",!0),n(!0),e.close()};var n=function(){};return function(i){t.get("lic")?i(!0):(n=i,e.open())}})()((function(e){if(e){quik.mainmenu.pushMenu({icon:quik.util.getGoogleIcon("e413"),title:"屏保",click:function(){c()}});var i=!1,n=null,o=!1;util.initSet(t,"reftime",3e4),util.initSet(t,"autoref",!0);var a=t.get("reftime"),l=t.get("autoref");function c(){i||((n=quik.util.element("div",{class:"pinbao-frame"})).innerHTML=`\n    <div class="bgq">\n        <img class="bg" alt="图片可能出错了，点右下角刷新吧！">\n    </div>\n    <div class="bg_from"></div>\n    <div class="messages">\n        <div class="a">15:53:34</div>\n        <div class="b" title="">...</div>\n    </div>\n    <div class="controls">\n        <div class="refresh">${quik.util.getGoogleIcon("e5d5")}</div>\n        <div class="close">${quik.util.getGoogleIcon("e5cd")}</div>\n    </div>`,document.body.append(n),quik.util.query(n,"img.bg").onload=function(){this.style.opacity="1"},quik.util.query(n,"img.bg").onerror=function(){g()},quik.util.query(n,".controls .refresh").onclick=function(){g()},quik.util.query(n,".controls .close").onclick=function(){m()},i=!0),n.style.display="block",document.body.requestFullscreen(),s.push(setInterval((function(){var t=new Date;quik.util.query(n,".messages .a").innerHTML=u(t.getHours())+":"+u(t.getMinutes())+":"+u(t.getSeconds())}),100)),g(),o=!0}document.addEventListener("keydown",(function(t){t.ctrlKey&&t.altKey&&"b"==t.key?c():"Esc"==t.key?o&&m():o&&" "==t.key&&g()}));var r=["loliapi","https://api.anosu.top/img?sort=pc","https://t.alcy.cc/pc/","https://t.alcy.cc/moe/","https://t.alcy.cc/fj/","https://img.xjh.me/random_img.php?type=bg&ctype=acg/nature&return=302","https://tu.ltyuanfang.cn/api/fengjing.php","https://api.gumengya.com/Api/FjImg?format=image"];var s=[];function u(t){return t<10?"0"+t:t}var p=null;function g(){clearTimeout(p),quik.util.query(n,"img.bg").style.opacity="";var t,e=r[Math.floor(Math.random()*r.length)];quik.util.query(n,"img.bg").src="loliapi"!=e?(t=e)+(t.indexOf("?")>-1?"&":"?")+"t="+(new Date).getTime():"https://img.loliapi.cn/i/pc/img"+(parseInt(696*Math.random())+1)+".webp",quik.util.query(n,".bg_from").innerText=e;var i=0;p=setTimeout(g,a),function t(){quik.util.xhr("https://tenapi.cn/v2/yiyan?format=json",(function(t){var e=JSON.parse(t).data;quik.util.query(n,".messages .b").innerText=e.hitokoto,quik.util.query(n,".messages .b").title="该一言来自"+e.source+"，由"+e.author+"上传"}),(function(){++i<=5&&t()}))}()}function m(){o=!1,s.forEach((t=>clearInterval(t))),document.exitFullscreen(),n.style.display=""}var d=new quik.SettingGroup({title:"屏保",index:3}),f=new quik.SettingItem({title:"自动切换图片",message:"屏保图片一段时间后自动切换",index:1,type:"boolean",get:function(){return t.get("autoref")},callback:function(e){t.set("autoref",e),e?(b.show(),p=setTimeout(g,a)):(b.hide(),clearTimeout(p))}}),b=new quik.SettingItem({title:"自动切换图片时间间隔",message:"屏保图片一段时间后自动切换",index:2,type:"select",init:function(){return{15e3:"15秒",3e4:"30秒",45e3:"45秒",6e4:"1分钟",9e4:"1.5分钟",12e4:"2分钟",18e4:"3分钟",3e5:"5分钟",6e5:"10分钟"}},get:function(){return t.get("reftime")},callback:function(e){e=parseInt(e),t.set("reftime",e),a=e}});quik.mainSetting.addNewGroup(d),d.addNewItem(f),d.addNewItem(b),l||b.hide(),quik.util.addStyle(".pinbao-frame{z-index:99;background-color:#000;width:100%;height:100vh;position:absolute;top:0;left:0;color:#000;animation:4s ease 0s infinite normal none running imgbgl;display:none}.pinbao-frame .messages{position:absolute;bottom:10px;left:10px;padding:10px;border-radius:5px}.pinbao-frame .messages:hover{background-color:rgba(255,255,255,.3)}.pinbao-frame .messages .a{font-size:50px;text-shadow:#666 0 0 5px}.pinbao-frame .messages .b{font-size:16px;text-shadow:#666 0 0 5px}.pinbao-frame .bg{width:100%;height:100%;position:absolute;top:0;left:0;object-fit:cover;object-position:center center;transition:opacity .3s;opacity:0}.pinbao-frame .controls{position:absolute;bottom:10px;right:10px}.pinbao-frame .controls>div{display:block;float:left;width:30px;height:30px;text-align:center;margin:10px;font-size:18px;text-shadow:#666 0 0 5px;border-radius:50%}.pinbao-frame .controls>div span{line-height:30px}.pinbao-frame .controls>div:hover{background-color:rgba(255,255,255,.3)}.pinbao-frame .bg_from{position:absolute;top:0;left:0;color:#333;padding:5px;opacity:.3}.pinbao-frame .bg_from:hover{background-color:rgba(255,255,255,.3);opacity:1}@keyframes imgbgl{0%{background-color:#000}50%{background-color:#666}100%{background-color:#000}}")}else quik.alert("如您不同意，请卸载本插件。")}));